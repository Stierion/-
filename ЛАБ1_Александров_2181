% Параметры сигнала:
U1 = 10;
U2 = 20;
U3 = 30;
U4 = 40;
T1 =(pi);
T2 =(2*pi);

Td = pi/20;
Fd = 1/Td;

x = []; % массив со значениями отссчетами сигнала
s = []; % массив со значениями функции самого сигнала в точках



t1 = [0:Td:T1]; % диапазон по времени первой прямой
u1 = ((U2 - U1)/T1)*(t1) + U1; % значения функции первой прямой

t2 = [T1:Td:T2]; % диапазон по времени второй прямой
u2 = ((U4 - U3)/T1)*(t2) + U2; % значения функции второй прямой
u2 = [u2,0] % добавление нулевого значения функции

s = [u1 u2] % создание массива с координатами функции s(t)
t = [0:Td:T1,T1:Td:T2,T2] % создание массива с координатами t функции S(t)


% Построим график:
figure('Name', 'Построение графика сигнала:')
    plot(t,s)
    title('График дискретного сигнала')
     xlabel('t')
     ylabel('S(t)')
     xlim([0,7])
     ylim([0,50])


xk = s; % массив значений отсчета сигнала
xw = []; % создание массива значений функции спектра дискретного сигнала

w = [-pi:((2*pi)/42):pi]; % массив значений нормированной частоты сигнала спектра

% Цикл заполнения массива значений функции спектра дискретного сигнала:
for (i=1:1:43) 
    xw(i) = xk(i) * (exp(-1i * w(i) * i));   
end;

f = Fd * w / (2*pi); % линейная частота

ampl = abs(xw); % Амплитуды функции спектра
phase = angle(xw) * 180/pi; % Фазы функции спектра

% Построим графики АЧС и ФЧС:

figure('Name', 'Построение графиков АЧС и ФЧС сигнала:')

subplot(1,2,2);
    stem(f,ampl);
    title('График АЧС')
    xlabel('w')
    ylabel('A(w)')

subplot(1,2,1);
    stem(f,phase);
    title('График ФЧС')
    xlabel('w')
    ylabel('Ф(w), градусы')



t_vost = (-5*Td):(Td/10):(T2+Td*5);  % диапазон времени для востановления сигнала

length_t_vost = length(t_vost);   % длина диапазона времени для восстановления сигнала
s_vost = zeros(1, length_t_vost);  % нулевой вектор значений функции восстановления

% Цикл заполнения нулевого вектора точками значений функции восстановления
% сигнала:

for i= 1:43            
    s_vost = s_vost + s(i).*sinc((t_vost-(i-1).*Td)./Td); 
end

% Построим график восстановленной фукнции:

figure('Name', 'Построение графиков сигнала:')
    plot(t_vost,s_vost,'r', t,s,'--blue')
    title('График восстановленного аналогового сигнала и дискретного сигнала')
    xlabel('w')
    ylabel('Ф(w), градусы')
    legend('Восстановленный','Дискретный')

